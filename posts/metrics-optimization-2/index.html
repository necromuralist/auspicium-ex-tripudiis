<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Measuring model performance.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Metrics Optimization 2 | Notes on Kaggle</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/Kaggle-Competitions/posts/metrics-optimization-2/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script><meta name="author" content="Cloistered Monkey">
<link rel="prev" href="../metrics/" title="Metrics" type="text/html">
<link rel="next" href="../classification-metrics/" title="Classification Metrics" type="text/html">
<meta property="og:site_name" content="Notes on Kaggle">
<meta property="og:title" content="Metrics Optimization 2">
<meta property="og:url" content="https://necromuralist.github.io/Kaggle-Competitions/posts/metrics-optimization-2/">
<meta property="og:description" content="Measuring model performance.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-09-19T08:04:33-07:00">
<meta property="article:tag" content="notes metrics">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-default navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://necromuralist.github.io/Kaggle-Competitions/">

                <span id="blog-title">Notes on Kaggle</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="https://necromuralist.github.io/">The Cloistered Monkey</a>
                </li>
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
	<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://necromuralist.github.io/Kaggle-Competitions/">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.org" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Metrics Optimization 2</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Cloistered Monkey
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2018-09-19T08:04:33-07:00" itemprop="datePublished" title="2018-09-19 08:04">2018-09-19 08:04</time></a></p>
            
        <p class="sourceline"><a href="index.org" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div id="outline-container-orga06ea0a" class="outline-2">
<h2 id="orga06ea0a">(R)MSPE, MAPE, and (R)MSLE</h2>
<div class="outline-text-2" id="text-orga06ea0a">
</div>
<div id="outline-container-org0125661" class="outline-3">
<h3 id="org0125661">An Off-By-One Example</h3>
<div class="outline-text-3" id="text-org0125661">
<p>
Suppose we are predicting sales for two shops and the two shops have different sales volumes but our predictions for both cases are off by one. In this case our Mean-Squared-Error (MSE) might be the same, but they have a different significance.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-right">
<col class="org-right">
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-right">Shop</th>
<th scope="col" class="org-right">Actual</th>
<th scope="col" class="org-left">Predicted</th>
<th scope="col" class="org-right">MSE</th>
</tr></thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-right">9</td>
<td class="org-left">10</td>
<td class="org-right">1</td>
</tr>
<tr>
<td class="org-right">2</td>
<td class="org-right">999</td>
<td class="org-left">1,000</td>
<td class="org-right">1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-orgc555c3a" class="outline-2">
<h2 id="orgc555c3a">Root Mean Squared Percentage Error and Mean Absolute Percentage Error</h2>
<div class="outline-text-2" id="text-orgc555c3a">
<p>
The MSE and Mean-Absolute-Error (MAE) are absolute errors which don't take into account how significant the error is. There are two relative errors,  Mean-Squared-Percentage-Error (MSPE) and Mean-Absolute-Percentage-Error (MAPE) that divide each error term by the actual value to give you a realive error instead of an absolute error.
</p>

<p>
\[
MSPE = \frac{1}{N} \sum_{i=1}^n \left( \frac{y_i - \hat{y}}{y_i}\right)^2
\]
</p>

<p>
\[
MAPE = \frac{1}{N} \sum_{i=1}^n \left| \frac{y_i - \hat{y}}{y_i}\right|
\]
</p>

<p>
The MAPE will be inversely proportional to its target and the MSPE will be inversely proportional to the square of the target.
</p>
</div>

<div id="outline-container-orgea5e0a2" class="outline-3">
<h3 id="orgea5e0a2">Optimal Constant Predictions</h3>
<div class="outline-text-3" id="text-orgea5e0a2">
<p>
The best constant prediction you can make when using the Mean Squared Error is to predict the mean of the target values. The best prediction you can make for the MSPE is to take a weighted mean of the target values. The best constant prediction you can make for the Mean Absolute Percentage Error is the weighted median.
</p>
</div>
</div>
</div>

<div id="outline-container-orgf9c7416" class="outline-2">
<h2 id="orgf9c7416">Root Mean Squared Logarithmic Error (MSLE)</h2>
<div class="outline-text-2" id="text-orgf9c7416">
<p>
\[
MSLE = \sqrt{\frac{1}{N}\sum_{i=1}^N (\log (y_i + 1) - \log(\hat{y}_i + 1))^2}\\
= \sqrt{MSE(\log(y_i + 1), \log(\hat{y}_i + 1))}
\]
</p>

<p>
You add a 1 to each term to prevent you from trying to take the <i>log</i> of 0, which is undefined. The RMSLE is biased toward predictions that are higher than the actual values rather than lower.
</p>

<p>
These are the best constant predictions you can make for the competition data set.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<colgroup>
<col class="org-left">
<col class="org-right">
</colgroup>
<thead><tr>
<th scope="col" class="org-left">Metric</th>
<th scope="col" class="org-right">Constant</th>
</tr></thead>
<tbody>
<tr>
<td class="org-left">MSE</td>
<td class="org-right">11</td>
</tr>
<tr>
<td class="org-left">RMSLE</td>
<td class="org-right">9.9</td>
</tr>
<tr>
<td class="org-left">MAE</td>
<td class="org-right">8</td>
</tr>
<tr>
<td class="org-left">MSPE</td>
<td class="org-right">6.6</td>
</tr>
<tr>
<td class="org-left">MAPE</td>
<td class="org-right">6</td>
</tr>
</tbody>
</table>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/notes-metrics/" rel="tag">notes metrics</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../metrics/" rel="prev" title="Metrics">Previous post</a>
            </li>
            <li class="next">
                <a href="../classification-metrics/" rel="next" title="Classification Metrics">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents Â© 2018         <a href="mailto:necromuralist@protonmail.com">Cloistered Monkey</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a><br>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
